/** MIT License
* 
* Copyright (c) 2017 Ludovic CLUBER 
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* http://mouettejs.lcluber.com
*/

var Mouette=function(){"use strict";function s(t){return t<10?"0"+t:t}function a(t){return null!==t&&"object"==typeof t&&!(null!==(e=t)&&e.constructor===Array);var e}function e(t,e){function r(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function c(t){return"function"==typeof t}function n(t){setTimeout(function(){throw t},0)}function l(t){return null!==t&&"object"==typeof t}function f(t){return t.reduce(function(t,e){return t.concat(e instanceof H?e.errors:e)},[])}function o(){}function i(t){if(t||(t=O.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function h(t){return Boolean(t&&void 0!==t.length)}function u(){}function p(t){if(!(this instanceof p))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(t,this)}function d(r,n){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,p._immediateFn(function(){var t=1===r._state?n.onFulfilled:n.onRejected;if(null!==t){var e;try{e=t(r._value)}catch(t){return void b(n.promise,t)}y(n.promise,e)}else(1===r._state?y:b)(n.promise,r._value)})):r._deferreds.push(n)}function y(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof p)return e._state=3,e._value=t,void v(e);if("function"==typeof r)return void g((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,v(e)}catch(t){b(e,t)}var n,o}function b(t,e){t._state=2,t._value=e,v(t)}function v(t){2===t._state&&0===t._deferreds.length&&p._immediateFn(function(){t._handled||p._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)d(t,t._deferreds[e]);t._deferreds=null}function m(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function g(t,e){var r=!1;try{t(function(t){r||(r=!0,y(e,t))},function(t){r||(r=!0,b(e,t))})}catch(t){if(r)return;r=!0,b(e,t)}}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var T={info:{id:1,name:"info",color:"#28a745"},trace:{id:2,name:"trace",color:"#17a2b8"},warn:{id:3,name:"warn",color:"#ffc107"},error:{id:4,name:"error",color:"#dc3545"},off:{id:99,name:"off",color:null}},_=function(){function t(t,e){var r,n,o;this.id=t.id,this.name=t.name,this.color=t.color,this.content=e,this.date=(r=new Date,n=[s(r.getMonth()+1),s(r.getDate()),r.getFullYear().toString().substr(-2)],o=[s(r.getHours()),s(r.getMinutes()),s(r.getSeconds())],n.join("/")+" "+o.join(":"))}return t.prototype.display=function(t){console[this.name]("%c["+t+"] "+this.date+" : ","color:"+this.color+";",this.content)},t}(),r=function(){function t(t,e){this.messages=[],this.name=t,this.messages=[],this.level=e}var e=t.prototype;return e.setLevel=function(t){return this.level=T.hasOwnProperty(t)?T[t]:this.level,this.getLevel()},e.getLevel=function(){return this.level.name},e.info=function(t){this.log(T.info,t)},e.trace=function(t){this.log(T.trace,t)},e.warn=function(t){this.log(T.warn,t)},e.error=function(t){this.log(T.error,t)},e.log=function(t,e){var r=new _(t,e);this.messages.push(r),this.level.id<=r.id&&r.display(this.name)},t}(),E=function(){function i(){}return i.setLevel=function(t){i.level=T.hasOwnProperty(t)?T[t]:i.level;var e=i.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}o.setLevel(i.level.name)}return i.getLevel()},i.getLevel=function(){return i.level.name},i.getGroup=function(t){var e=i.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}var s=o;if(s.name===t)return s}return null},i.addGroup=function(t){return this.getGroup(t)||this.pushGroup(t)},i.pushGroup=function(t){var e=new r(t,i.level);return i.groups.push(e),e},i}();E.level=T.error,E.groups=[];var t,x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},S=!1,O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;S=t},get useDeprecatedSynchronousErrorHandling(){return S}},P={closed:!0,next:function(){},error:function(t){if(O.useDeprecatedSynchronousErrorHandling)throw t;n(t)},complete:function(){}},A=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}(),H=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),L=function(){function u(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return u.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,r=this._unsubscribe,n=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof u)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o){t[o].remove(this)}if(c(r))try{r.call(this)}catch(t){e=t instanceof H?f(t.errors):[t]}if(A(n)){o=-1;for(var s=n.length;++o<s;){var i=n[o];if(l(i))try{i.unsubscribe()}catch(t){e=e||[],t instanceof H?e=e.concat(f(t.errors)):e.push(t)}}}if(e)throw new H(e)}},u.prototype.add=function(t){var e=t;if(!t)return u.EMPTY;switch(typeof t){case"function":e=new u(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof u)){var r=e;(e=new u)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=e._parentOrParents;if(null===n)e._parentOrParents=this;else if(n instanceof u){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},u.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},u.EMPTY=((t=new u).closed=!0,t),u}(),k=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),D=function(o){function s(t,e,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=P;break;case 1:if(!t){n.destination=P;break}if("object"==typeof t){t instanceof s?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new C(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new C(n,t,e,r)}return n}return e(s,o),s.prototype[k]=function(){return this},s.create=function(t,e,r){var n=new s(t,e,r);return n.syncErrorThrowable=!1,n},s.prototype.next=function(t){this.isStopped||this._next(t)},s.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},s.prototype._next=function(t){this.destination.next(t)},s.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},s}(L),C=function(u){function t(t,e,r,n){var o,s=u.call(this)||this;s._parentSubscriber=t;var i=s;return c(e)?o=e:e&&(o=e.next,r=e.error,n=e.complete,e!==P&&(c((i=Object.create(e)).unsubscribe)&&s.add(i.unsubscribe.bind(i)),i.unsubscribe=s.unsubscribe.bind(s))),s._context=i,s._next=o,s._error=r,s._complete=n,s}return e(t,u),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;O.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=O.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):n(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;n(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};O.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),O.useDeprecatedSynchronousErrorHandling)throw t;n(t)}},t.prototype.__tryOrSetError=function(e,t,r){if(!O.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return O.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(n(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(D),j=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),N=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,o=function(t,e,r){if(t){if(t instanceof D)return t;if(t[k])return t[k]()}return t||e||r?new D(t,e,r):new D(P)}(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||O.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),O.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){O.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,o=e.isStopped;if(r||o)return!1;t=n&&n instanceof D?n:null}return!0}(e)?console.warn(t):e.error(t)}},r.prototype.forEach=function(n,t){var o=this;return new(t=i(t))(function(t,e){var r;r=o.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[j]=function(){return this},r.prototype.pipe=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:o)(this)},r.prototype.toPromise=function(t){var n=this;return new(t=i(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();t||(t={});var I=setTimeout;p.prototype.catch=function(t){return this.then(null,t)},p.prototype.then=function(t,e){var r=new this.constructor(u);return d(this,new m(t,e,r)),r},p.prototype.finally=function(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})},p.all=function(e){return new p(function(n,o){function s(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){s(e,t)},o)}i[e]=t,0==--u&&n(i)}catch(t){o(t)}}if(!h(e))return o(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);for(var u=i.length,t=0;t<i.length;t++)s(t,i[t])})},p.resolve=function(e){return e&&"object"==typeof e&&e.constructor===p?e:new p(function(t){t(e)})},p.reject=function(r){return new p(function(t,e){e(r)})},p.race=function(o){return new p(function(t,e){if(!h(o))return e(new TypeError("Promise.race accepts an array"));for(var r=0,n=o.length;r<n;r++)p.resolve(o[r]).then(t,e)})},p._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){I(t,0)},p._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var r,n,o=Object(this),s=o.length>>>0;if(0===s)return!1;for(var i=0|e,u=Math.max(0<=i?i:s-Math.abs(i),0);u<s;){if((r=o[u])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;u++}return!1}});var M=window.AudioContext||window.webkitAudioContext||!1,G=function(){function t(t,e,r,n,o,s){this.eventType="promise",this.log=E.addGroup("Aias"),this.method=t,this.url=e,this.responseType=r,this.async=!0,this.noCache=!1,this.headers=n,this.eventType=o||this.eventType,this.data=s||null}var e=t.prototype;return e.call=function(){switch(this.eventType){case"observable":return this.useObservable(this.url,this.responseType,this.data);default:return this.usePromise(this.url,this.responseType,this.data)}},e.usePromise=function(s,i,t){var u=this;return new p(function(r,n){var o=new XMLHttpRequest;switch(s+=u.noCache?"?cache="+(new Date).getTime():"",o.open(u.method,s,u.async),o.responseType="audiobuffer"===i?"arraybuffer":i,u.setRequestHeaders(o),i){case"json":case"arraybuffer":case"audiobuffer":case"blob":o.onload=function(){if(4==o.readyState)if(200==o.status){var t=o.response;if(t)if(u.logInfo(s,o.status,o.statusText),"audiobuffer"===i)if(M){var e=new M;e.decodeAudioData(t,function(t){e.close(),r(t)},function(t){u.log.error("xhr ("+u.method+":"+s+") failed with decodeAudioData error : "+t.message),e.close(),n({status:t.name,statusText:t.message})})}else u.log.error("xhr ("+u.method+":"+s+") failed with error : Web Audio API is not supported by your browser."),n({status:"Web Audio API not supported by your browser",statusText:"Web Audio API is not supported by your browser"});else r(t);else u.logError(s,o.status,o.statusText),n({status:o.status,statusText:o.statusText})}else u.logError(s,o.status,o.statusText),n({status:o.status,statusText:o.statusText})};break;default:o.onreadystatechange=function(){4==o.readyState&&(200==o.status?(u.logInfo(s,o.status,o.statusText),r(o.responseText)):(u.logError(s,o.status,o.statusText),n({status:o.status,statusText:o.statusText})))}}a(t)&&(t=JSON.stringify(t)),o.send(t||null),u.log.info("xhr ("+u.method+":"+s+")sent")})},e.useObservable=function(o,s,t){var i=this;return new N(function(r){var n=new XMLHttpRequest;switch(o+=i.noCache?"?cache="+(new Date).getTime():"",n.open(i.method,o,i.async),n.responseType="audiobuffer"===s?"arraybuffer":s,i.setRequestHeaders(n),s){case"json":case"arraybuffer":case"audiobuffer":case"blob":n.onload=function(){if(4==n.readyState)if(200==n.status){var t=n.response;if(t)if(i.logInfo(o,n.status,n.statusText),"audiobuffer"===s)if(M){var e=new M;e.decodeAudioData(t,function(t){e.close(),r.next(t),r.complete()},function(t){i.log.error("xhr ("+i.method+":"+o+") failed with decodeAudioData error : "+t.message),e.close(),r.error({status:t.name,statusText:t.message}),r.complete()})}else i.log.error("xhr ("+i.method+":"+o+") failed with error : Web Audio API is not supported by your browser."),r.error({status:"Web Audio API not supported by your browser",statusText:"Web Audio API is not supported by your browser"}),r.complete();else r.next(t),r.complete();else i.logError(o,n.status,n.statusText),r.error({status:n.status,statusText:n.statusText}),r.complete()}else i.logError(o,n.status,n.statusText),r.error({status:n.status,statusText:n.statusText}),r.complete()};break;default:n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(i.logInfo(o,n.status,n.statusText),r.next(n.responseText)):(i.logError(o,n.status,n.statusText),r.error({status:n.status,statusText:n.statusText})),r.complete())}}a(t)&&(t=JSON.stringify(t)),n.send(t||null),i.log.info("xhr ("+i.method+":"+o+")sent")})},e.setRequestHeaders=function(t){for(var e in this.headers)this.headers.hasOwnProperty(e)&&t.setRequestHeader(e,this.headers[e])},e.logInfo=function(t,e,r){this.log.info("xhr ("+this.method+":"+t+") done with status "+e+" "+r)},e.logError=function(t,e,r){this.log.error("xhr ("+this.method+":"+t+") failed with status "+e+" "+r)},t}(),R=function(){},q={GET:{type:"GET",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},HEAD:{type:"HEAD",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},POST:{type:"POST",defaultHeaders:{"Content-Type":"application/json"},headers:{},data:!0},PUT:{type:"PUT",defaultHeaders:{"Content-Type":"application/json"},headers:{},data:!0},DELETE:{type:"DELETE",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},CONNECT:{type:"CONNECT",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},OPTIONS:{type:"OPTIONS",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},TRACE:{type:"TRACE",defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},headers:{},data:!1},PATCH:{type:"PATCH",defaultHeaders:{"Content-Type":"application/json"},headers:{},data:!1}},U=function(){function t(){}return t.setEventType=function(t){this.eventType=this.isOfTypeEventType(t)?t:"promise"},t.setLogLevel=function(t){return this.log.setLevel(t)},t.getLogLevel=function(){return this.log.getLevel()},t.setHeaders=function(t,e){if(q.hasOwnProperty(t))for(var r in e)e.hasOwnProperty(r)&&R.hasOwnProperty(r)&&(q[t].headers[r]=e[r])},t.setMockup=function(t){var e,r;return this.mockup.data=null!=(e=t.data)?e:this.mockup.data,this.mockup.delay=null!=(r=t.delay)?r:this.mockup.delay,this.mockup},t.getMockupData=function(){var r=this;switch(this.eventType){case"observable":return new N(function(t){setTimeout(function(){r.mockup.data?(t.next(r.mockup.data),t.complete()):t.error(null)},r.mockup.delay)});default:return this.promiseTimeout().then(function(){return new p(function(t,e){r.mockup.data?t(r.mockup.data):e(null)})})}},t.get=function(t,e){return this.request(q.GET.type,t,e,q.GET.headers||q.GET.defaultHeaders,null)},t.head=function(t,e){return this.request(q.HEAD.type,t,e,q.HEAD.headers||q.HEAD.defaultHeaders,null)},t.post=function(t,e,r){return this.request(q.POST.type,t,e,q.POST.headers||q.POST.defaultHeaders,r)},t.put=function(t,e,r){return this.request(q.PUT.type,t,e,q.PUT.headers||q.PUT.defaultHeaders,r)},t.delete=function(t,e){return this.request(q.DELETE.type,t,e,q.DELETE.headers||q.DELETE.defaultHeaders,null)},t.connect=function(t,e){return this.request(q.CONNECT.type,t,e,q.CONNECT.headers||q.CONNECT.defaultHeaders,null)},t.options=function(t,e){return this.request(q.OPTIONS.type,t,e,q.OPTIONS.headers||q.OPTIONS.defaultHeaders,null)},t.trace=function(t,e){return this.request(q.TRACE.type,t,e,q.TRACE.headers||q.TRACE.defaultHeaders,null)},t.patch=function(t,e,r){return this.request(q.PATCH.type,t,e,q.PATCH.headers||q.PATCH.defaultHeaders,r)},t.request=function(t,e,r,n,o){if(this.mockup.data)return this.getMockupData();var s=new G(t,e,r,n,this.eventType,o||null);return s.call()},t.promiseTimeout=function(){var e=this;return new p(function(t){return setTimeout(t,e.mockup.delay)})},t.isOfTypeEventType=function(t){return["promise","observable"].includes(t)},t}();U.log=E.addGroup("Aias"),U.eventType="promise",U.mockup={data:null,delay:200};var F={info:{id:1,name:"info",color:"#28a745"},time:{id:2,name:"time",color:"#28a745"},trace:{id:3,name:"trace",color:"#17a2b8"},warn:{id:4,name:"warn",color:"#ffc107"},error:{id:5,name:"error",color:"#dc3545"},off:{id:99,name:"off",color:null}},W=function(){function t(t,e,r){this._level="error",this._console=!0,this._maxLength=200,this.level=t||this._level,this.console="boolean"==typeof e?e:this._console,this.maxLength=r||this.maxLength}var e,r,n;return t.prototype.displayMessage=function(t){return this._console&&F[this._level].id<=t},e=t,(r=[{key:"level",set:function(t){this._level=F.hasOwnProperty(t)?t:this._level},get:function(){return this._level}},{key:"console",set:function(t){this._console=!!t},get:function(){return this._console}},{key:"maxLength",set:function(t){this._maxLength=50<t?t:50},get:function(){return this._maxLength}}])&&w(e.prototype,r),n&&w(e,n),t}(),Z=function(){function n(t,e){this.id=t.id,this.name=t.name,this.color=t.color,this.content=e,this.date=n.formatDate()}return n.prototype.display=function(t){var e="time"===this.name?"info":this.name;console[e]("%c["+t+"] "+this.date+" : ","color:"+this.color+";",this.content)},n.addZero=function(t){return t<10?"0"+t:t},n.formatDate=function(){var t=new Date,e=[n.addZero(t.getMonth()+1),n.addZero(t.getDate()),t.getFullYear().toString().substr(-2)],r=[n.addZero(t.getHours()),n.addZero(t.getMinutes()),n.addZero(t.getSeconds())];return e.join("/")+" "+r.join(":")},n}(),V=function(t){this.key=t,this.timestamp=(new Date).getTime()},Y=function(){function t(t,e){this.name=t,this.logs=[],this.timers=[],this.options=new W(e.level,e.console,e.maxLength)}var e=t.prototype;return e.setLevel=function(t){return this.options.level=t,this.options.level},e.getLevel=function(){return this.options.level},e.displayConsole=function(t){return this.options.console=t,this.options.console},e.setMaxLength=function(t){return this.options.maxLength=t,this.options.maxLength},e.getMaxLength=function(){return this.options.maxLength},e.info=function(t){this.log(F.info,t)},e.trace=function(t){this.log(F.trace,t)},e.time=function(e){var t=this.timers.findIndex(function(t){return t.key===e});if(-1<t){var r=(new Date).getTime()-this.timers[t].timestamp;this.log(F.time,e+" completed in "+r+" ms"),this.timers.splice(t,1)}else this.addTimer(e),this.log(F.time,e+" started")},e.warn=function(t){this.log(F.warn,t)},e.error=function(t){this.log(F.error,t)},e.initLogs=function(){this.logs=[]},e.log=function(t,e){var r=new Z(t,e);this.options.displayMessage(r.id)&&(this.addLog(r),r.display(this.name))},e.addLog=function(t){this.logs.length>=this.options.maxLength&&this.logs.shift(),this.logs.push(t)},e.addTimer=function(t){this.timers.length>=this.options.maxLength&&this.timers.shift(),this.timers.push(new V(t))},t}(),J=function(){function t(){}return t.setLevel=function(t){this.options.level=t;var e=this.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}o.setLevel(this.options.level)}return this.getLevel()},t.getLevel=function(){return this.options.level},t.displayConsole=function(t){this.options.console=t;var e=this.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}o.displayConsole(this.options.console)}return this.options.console},t.addGroup=function(t){return this.getGroup(t)||this.createGroup(t)},t.sendLogs=function(t,e){var s=this,r=[];e&&U.setHeaders("POST",e);var n=this.groups,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var u;if(o){if(i>=n.length)break;u=n[i++]}else{if((i=n.next()).done)break;u=i.value}var a=u;r.push.apply(r,a.logs)}return U.post(t,"json",r).then(function(t){var e=s.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}o.initLogs()}return t}).catch(function(t){return console.log("error",t),t})},t.getGroup=function(t){var e=this.groups,r=Array.isArray(e),n=0;for(e=r?e:e[Symbol.iterator]();;){var o;if(r){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}var s=o;if(s.name===t)return s}return null},t.createGroup=function(t){var e=new Y(t,this.options);return this.groups.push(e),e},t}();return J.groups=[],J.options=new W,J}();